# Скайпро.Курс Python
## Курсовая работа 6 - Список задач

Серверная часть для приложения отслеживания задач

# Описание

### Стек

- django - серверная часть
- postgresql - база данных
- требования к разработке указаны в todolist/requirements.dev.txt

### Особенности

1. Аутентификация и пользователь (основное приложение):
- VK Oauth
- базовая аутентификация django
- обновление профиля
- смена пароля
2. Основной интерфейс (приложение goals):
- базовый CRUD с фильтрами и сортировкой: доски объявлений, цели, категории, комментарии
- пользователь может просматривать элементы, связанные с досками, членом которых он является (владелец, автор или читатель)
- пользователь может создавать категории, цели, комментарии, только если он является владельцем / автором соответствующей доски
- пользователь может обновлять, удалять только в том случае, если он является владельцем / автором соответствующей доски
- пользователь может обновлять, удалять только свои комментарии
- когда доска, категория помечена как is_deleted, все дочерние категории, цели также помечены как is_deleted
3. Telegram-бот (приложение-бот):
- пользователю необходимо подтвердить личность с помощью проверочного кода
- пользователь может просматривать и создавать цели
- имя пользователя бота в телеграмме: @TodolistT1000Bot

## Как запустить проект в среде разработки

1. Создайте виртуальную среду
2. Установите зависимости от requirements.dev.txt
- `установка pip -r todolist/requirements.dev.txt `
3. Установите переменные окружения в файле .env
- создать файл .env в папке todolist
- вы можете скопировать переменные по умолчанию из todolist/.env.example
4. Запустите базу данных из папки развертывания
- "развертывание компакт-диска`
- `docker compose --env-file ../todolist/.env -f docker-compose.db.yaml up -d`
5. Выполните миграцию из папки todolist
- `список дел с компакт-дисками`
- `./manage.py создавайте иллюстрации`
- `./manage.py мигрировать`
6. Запуск проекта
- `./manage.py runserver`

#### Доступ к сайту администратора

1. Создайте администратора-пользователя
- `./управлять.py создает суперпользователя`
- установите значения и обязательные поля
2. Зайдите на сайт администратора по адресу http://127.0.0.1:8000/admin/

## Как запустить проект в разработке с помощью Docker-compose

1. Создайте файл .docker_env в папке развертывания:
- вы можете скопировать переменные по умолчанию из todolist/.env.example
- убедитесь, что для DB_HOST установлено значение `db`, которое является именем контейнера
2. Используйте docker-compose.dev.yaml из папки развертывания
- "развертывание компакт-диска`
- `docker compose --env-file .docker_env -f docker-compose.dev.yaml up -d`
3. Было бы сделано следующее:
- контейнер postgresql запустится
- миграции будут применяться
- контейнер api запустится
- передний контейнер запустился бы

## Развернуть

1. Развертывание автоматизировано с помощью github actions.
2. Используемые файлы проекта:
- действия: .github/рабочие процессы/действия.yaml
- создать файл: deploy/docker-compose.ci.yaml
- переменные env: deploy/.ci_env
- переменные в файлах compose и env заменены секретами github
3. Изображения Docker hub:
- фронт: sermalenk/skypro-фронт:урок-38
- назад: kpaveliev/skypro-c06-cw06-список задач:<тег>
4. Добавить администратора при первом запуске:
- подключитесь к серверу и получите доступ к папке проекта
- `docker exec -it <api container_id> /bin/bash`
- `./управлять.py создает суперпользователя`
